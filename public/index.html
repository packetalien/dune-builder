<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dune: Awakening - Base Build Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Informational note about tool accuracy and Deep Desert discounts -->
    <p class="info-note">This tool attempts to be as accurate as possible. The Deep Desert discounts change. You "should" get all resources back. It "should be" 50% off rounded up.</p>
    <header>
        <h1>Dune: Awakening - Base Build Calculator</h1>
    </header>
    <main class="calculator-layout">
        <!-- Panel for selecting building components -->
        <section id="item-selection-panel" class="panel">
            <h2>Available Components</h2>
            <!-- Search input with accessibility label -->
            <label for="item-search" class="visually-hidden">Search Building Components</label>
            <input type="text" id="item-search" placeholder="Search items...">
            <div id="component-list"></div>
        </section>
        <!-- Panel for displaying the current build -->
        <section id="current-build-panel" class="panel">
            <h2>Current Build</h2>
            <div id="selected-items-list"></div>
        </section>
        <!-- Panel for totals, with buttons for water calculator and export -->
        <section id="total-materials-panel" class="panel">
            <h2>Totals</h2>
            <!-- Button to open water calculator modal -->
            <button id="open-water-calculator">Enhanced Water Calculator</button>
            <!-- Button to export build report as text file -->
            <button id="export-build">Export Build</button>
            <div class="totals-container">
                <div id="original-costs-container">
                    <h3>Required Materials (Original Cost)</h3>
                    <div id="materials-summary-list"></div>
                </div>
                <div id="discounted-costs-container">
                    <h3>Deep Desert Discount (50% off, rounded up)</h3>
                    <div id="materials-summary-discounted-list"></div>
                </div>
            </div>
            <div id="power-summary">
                <h3>Power Overview</h3>
                <p>Total Power Generated: <span id="total-power-generated">0</span> <abbr title="Watts">W</abbr></p>
                <p>Total Power Consumed: <span id="total-power-consumed">0</span> <abbr title="Watts">W</abbr></p>
                <p>Net Power: <span id="net-power">0</span> <abbr title="Watts">W</abbr></p>
                <div id="power-warning"></div>
            </div>
        </section>
    </main>
    <!-- Footer with dynamic year -->
    <footer>
        <p>Â© <span id="current-year"></span> Dune: Awakening Base Build Calculator. Fan-made tool.</p>
    </footer>
    <!-- Enhanced water calculator modal, hidden by default -->
    <div id="water-calculator-modal" style="display: none;" role="dialog" aria-labelledby="water-calculator-title">
        <h3 id="water-calculator-title">Enhanced Water Calculator</h3>
        <div id="water-totals"></div>
        <button id="close-water-calculator">Close</button>
    </div>
    <!-- Load enhanced water calculator first -->
    <script src="enhanced_water_calculator.js"></script>
    <!-- Load main application -->
    <script src="app.js"></script>
    <!-- Inline script to set current year -->
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
</body>
</html>
